<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Creating drug cohorts</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Creating drug cohorts</h1>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>In this vignette we will introduce how to create a drug users
cohorts. A cohort is a set of people that satisfy a certain inclusion
criteria during a certain time frame. The cohort object is defined in :
<code>vignette(&quot;cdm_reference&quot;, package = &quot;omopgenerics&quot;)</code>.</p>
<p>The function <code>generateDrugUtilisationCohortSet</code> is used to
generate cohorts of drug users based on the <code>drug_exposure</code>
table and a conceptSet.</p>
<p>These cohorts can be subsetted to the exposures of interest applying
the different inclusion criteria:</p>
<ul>
<li><p>Require that entries are in a certain date range
<code>requireDrugInDateRange()</code>.</p></li>
<li><p>Subset to the first entry
<code>requireIsFirstDrugEntry()</code>.</p></li>
<li><p>Require a certain time in observation before the entries
<code>requireObservationBeforeDrug()</code>.</p></li>
<li><p>Require a certain time before exposure
<code>requirePriorDrugWashout()</code>.</p></li>
</ul>
</div>
<div id="creating-a-cdm_reference-object" class="section level1">
<h1>Creating a <code>cdm_reference</code> object</h1>
<p>The first thing that we need is a <code>cdm_reference</code> object
to our OMOP CDM instance. You can learn how to create cdm references
using CDMConnector here:
<code>vignette(&quot;a04_DBI_connection_examples&quot;, package = &quot;CDMConnector&quot;)</code>.</p>
<p>The DrugUtilisation packages contains some mock data that can be
useful to test the package:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(DrugUtilisation)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>cdm <span class="ot">&lt;-</span> <span class="fu">mockDrugUtilisation</span>(<span class="at">numberIndividuals =</span> <span class="dv">100</span>, <span class="at">seed =</span> <span class="dv">1</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>cdm</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="co">#&gt; ── # OMOP CDM reference (duckdb) of DUS MOCK ───────────────────────────────────</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co">#&gt; • omop tables: person, observation_period, concept, concept_ancestor,</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="co">#&gt; drug_strength, concept_relationship, drug_exposure, condition_occurrence,</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="co">#&gt; observation, visit_occurrence</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co">#&gt; • cohort tables: cohort1, cohort2</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co">#&gt; • achilles tables: -</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="co">#&gt; • other tables: -</span></span></code></pre></div>
</div>
<div id="create-a-drug-users-cohort" class="section level1">
<h1>Create a drug users cohort</h1>
<p>To create a basic drug users cohort we need two things:</p>
<ul>
<li>A conceptSet: will determine which concepts we will use.</li>
<li>A gapEra: will determine how we will collapse those exposures.</li>
</ul>
<div id="creating-a-conceptset" class="section level2">
<h2>Creating a conceptSet</h2>
<p>There are three possible forms of a conceptSet:</p>
<ul>
<li>A named list of concept ids</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>conceptSet <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">acetaminophen =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>conceptSet</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="co">#&gt; $acetaminophen</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span></code></pre></div>
<ul>
<li>A <code>codelist</code> object, see
<code>vignette(&quot;codelists&quot;, package = &quot;omopgenerics&quot;)</code></li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>conceptSet <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">acetaminophen =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)) <span class="sc">|&gt;</span> omopgenerics<span class="sc">::</span><span class="fu">newCodelist</span>()</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>conceptSet</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co">#&gt; ── 1 codelist ──────────────────────────────────────────────────────────────────</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="co">#&gt; - acetaminophen (3 codes)</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>conceptSet<span class="sc">$</span>acetaminophen</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3</span></span></code></pre></div>
<ul>
<li>A <code>conceptSetExpression</code> object, see
<code>vignette(&quot;codelists&quot;, package = &quot;omopgenerics&quot;)</code></li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>conceptSet <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">acetaminophen =</span> dplyr<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="at">concept_id =</span> <span class="dv">1125315</span>,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="at">excluded =</span> <span class="cn">FALSE</span>,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="at">descendants =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="at">mapped =</span> <span class="cn">FALSE</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>)) <span class="sc">|&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  omopgenerics<span class="sc">::</span><span class="fu">newConceptSetExpression</span>()</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>conceptSet</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt; ── 1 conceptSetExpression ──────────────────────────────────────────────────────</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt; - acetaminophen (1 concept criteria)</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>conceptSet<span class="sc">$</span>acetaminophen</span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt;   concept_id excluded descendants mapped</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt;        &lt;dbl&gt; &lt;lgl&gt;    &lt;lgl&gt;       &lt;lgl&gt; </span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="co">#&gt; 1    1125315 FALSE    TRUE        FALSE</span></span></code></pre></div>
<p>The package <a href="https://cran.r-project.org/package=CodelistGenerator">CodelistGenerator</a>
can be very useful to create conceptSet.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">library</span>(CodelistGenerator)</span></code></pre></div>
<p>For example we can create a conceptSet based in an ingredient with
<code>getDrugIngredientCodes()</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>codes <span class="ot">&lt;-</span> <span class="fu">getDrugIngredientCodes</span>(<span class="at">cdm =</span> cdm, <span class="at">name =</span> <span class="st">&quot;acetaminophen&quot;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>codes[[<span class="st">&quot;161_acetaminophen&quot;</span>]]</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">#&gt; [1]  1125315  1125360  2905077 43135274</span></span></code></pre></div>
<p>We could also use the function <code>codesFromConceptSet()</code> to
read a concept set from a json file:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>codes <span class="ot">&lt;-</span> <span class="fu">codesFromConceptSet</span>(<span class="at">path =</span> <span class="fu">system.file</span>(<span class="st">&quot;acetaminophen.json&quot;</span>, <span class="at">package =</span> <span class="st">&quot;DrugUtilisation&quot;</span>), <span class="at">cdm =</span> cdm)</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>codes</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">#&gt; ── 1 codelist ──────────────────────────────────────────────────────────────────</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">#&gt; - acetaminophen (4 codes)</span></span></code></pre></div>
</div>
<div id="the-gapera-parameter" class="section level2">
<h2>The gapEra parameter</h2>
<p>The <code>gapEra</code> parameter is used to join exposures into
episodes, let’s say for example we have an individual with 4 drug
exposures that we are interested in. The first two overlap each other,
then there is a gap of 29 days and two consecutive exposures:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
<p>If we would create the episode with <strong>gapEra = 0</strong>, we
would have 3 resultant episodes, the first two that overlap would be
joined in a single episode, but then the other two would be
independent:</p>
<pre><code>#&gt; # A tibble: 3 × 4
#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date
#&gt;                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         
#&gt; 1                    1          1 2020-01-01        2020-02-15     
#&gt; 2                    1          1 2020-03-15        2020-04-19     
#&gt; 3                    1          1 2020-04-20        2020-05-15</code></pre>
<p><img role="img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAADACAMAAADsiSGEAAAA21BMVEUAAAAAADoAAGYAOpAAZrYAv8QzMzM6AAA6ADo6kNtNTU1NTW5NTY5Nbo5NbqtNjshmAABmtv9uTU1uTW5uTY5ubo5ubqtujqtujshuq+SOTU2OTW6OTY6Obk2Obm6ObquOjm6Ojo6OjsiOyP+QOgCQtpCQ2/+rbk2rbm6rbo6rjk2rjqurq26rq46ryKur5Mir5P+2///Ijk3Ijm7IyI7I5KvI/+TI///bkDrb///kq27kq47k/8jk///r6+v4dm3/tmb/yI7/25D/5Kv//7b//8j//9v//+T///+sX73cAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAI6UlEQVR4nO2dDVvTVhiGmdOpwcEE5gRx6uJE9qEY53Ddulmz2vz/X7ScfJSEYSnt856ckPu5LhpFb8455e57ktK+bGSEBJyNridAyKIgKAk6CEqCDoKSoIOgJOggKAk6Kwv694Is/MfLsya+Dt8NquDXw9eiTVaOoAGhCh5BEdQMVfCDFDTdOy2OoyiK7p1m04Noa4ygelTBD1HQibPSJYnd7ewozkbbCKpHFfwABU02X5UVdPbyxB2mh6fzmoqgSlTBD1DQ+Rafb+1RFGfpg3E2fXSyCCBEnGUETXdPXBWdbDUFNXxIUUG94/2uoEWSuF1BDWeMoN7xayEo56BWqIIfsqBub58dn86O9rmKN0EV/GAFdR+jKNo8yXge1ApV8IMUdFEMZ4yg3nEEXXvCfngE9T40goaPKngERVAzVMEjKIKaoQoeQRHUDFXwCIqgZqiCR1AENUMVPIIiqBmq4BEUQc1QBY+ghHQQKmgAqIKngiKoGargERRBzVAFj6AIaoYqeARFUDNUwSMogpqhCh5BEdQMVfAIiqBmqIJHUAQ1QxU8giKoGargERRBzVAFj6AIaoYq+EEKWvcRSXdc87C6TSiCqlEFP0RB6/6griGTayBWtglFUDmq4Aco6Lw/6MT1u0niqk0ogspRBT9AQVvNw/IqWrUJJcRjlhTUNQ6r2oRWnzF8SFFBveN9r6DTg/3qU/PzUMMZI6h3vOeCpjvznR1BDVAFP2RBKz+rNqEIKkcV/GAFzT/c85/u8qhqE4qgalTBD1LQRTGcMYJ6xxF07Qn74RHU+9AIGj6q4BEUQc1QBY+gCGqGKngERVAzVMEjKIKaoQoeQRHUDFXwCIqgZqiCR1AENUMVPIIS0kGooAGgCp4KiqBmqIJHUAQ1QxU8giKoGargERRBzVAFj6AIaoYqeARFUDNUwSMogpqhCh5BEdQMVfAIiqBmqIJH0OUEvVVHPWFj/p95fI7avLtCENSt/9aVv4UrDd24vxF0iSCoS98ErTuLTA+irfH8gKCyURF0LUHr/qCzozgbbdeHJQXd6Fe6FrTr9ZdpC2o+1JqCzvuDTg+LBiPVAUEvDoJeeSjVFp8+GLv+oNVhEZBlgd3jS+dM0MXrEyewu6sLQS+5h5YR1HUNy82sDtW/9aMkLB0qqMt1qqCX3eOrfLvqua3Brsp3LSgXSee/6BUEXekcdJVJ13Nbg12VR1CXngrq+n8XV/H7V7iKX2XS9dzWYFflEdSlj4K6jys8D7r6jGU4P+r0TPfqR52KGSOodxxB156wHx5BvQ+NoOGjCh5BEdQMVfAIiqBmqIJHUAQ1QxU8giKoGargERRBzVAFj6AIaoYqeARFUDNUwSMoIR2EChoAquCpoAhqhip4BEVQM1TBIyiCmqEKHkER1AxV8AiKoGaogkdQBDVDFTyCIqgZquARFEHNUAWPoAhqhip4BEVQM1TBIyiCmqEKfoCCzt8GP4pc4uJ475LOIooZI6h3vI+CttuBus5hSUwFNUEV/PAEbbVick3DZi+brRcNZ4yg3vE+CtpqZudKab7lu42eEI/5vKDNdqDFMd1tVlHDhxQV1Dve9wo6mTcNm5+HGs4YQb3jfRS0eQ6a7NefRVADVMEPT9BGO9ByY3dldHbM00x6VMEPT9DqedCiP2i504+iaHN+IW84YwT1jvdS0MUxnDGCescRdO0J++ER1PvQCBo+quARFEHNUAWPoAhqhip4BEVQM1TBIyiCmqEKHkER1AxV8AiKoGaogkdQBDVDFTyCEtJBqKABoAqeCoqgZqiCR1AENUMVPIIiqBmq4BEUQc1QBY+gCGqGKngERVAzVMEjKIKaoQoeQRHUDFXwCIqgZqiCR1AENUMVPIIiqBmq4Aco6Lw/aN0Y9OwTCCpFFfzwBG30By373bQbhhrOGEG9430U9Kw3U9XSrtUwFEGFqIIfnqBn3e2qxqCthqGEeMky/UGrxqDNhqFUUCWq4IdcQYskcfsThjNGUO94HwVtn3LmgnIOaoUq+OEJetYftGoM2mgYiqBSVMEPT9BGf9CqMSjPgxqhCn6Agq6eryy+aOjDD3LR9kMjaL9HDWF4BO3F8INctP3QCNrvUUMYvn+CEqIKgpKgg6Ak6CAoCToISoKOVtDGz+59J92J8vz/d4qaD+t++Jvc62zdXb0C0tfCr4+g7aG9Cbr73Tibft/durPJs/3L/5M+vhauF9SVMvfq5p/cwV9qQacH7u1TWfLMz/Dp3tOTLH12tu5vH/utprOXr5/kphz+4l4u4XH08wtPyle0yyMX1O04+SHd2W/8lnkPafzmcPeSq2Rr7KWcp3u/xdmfrxrr9vmozIqX7eZuTA+2xpN7Pkc/v/BJ/v22KOUmW/z08LSopT43vuIcdLs4I3MvXHVbvI9tPt1793B2/K61bq8Z5WLkyz6I3ZsePI5+fuHTJ+O3FifDBoIm7j3K/gWt7ir3/ql8s3N3lh9Bf//5rx/a6/aZ2VHxlvDiSimJvQraXnh5qqGPfovPH8tuq+tK0MNqp4+Lt0n7GPbtr/vtdftMcd6XxE5Q3xW0vfBsZHOxphPU3UeT8swv3T3pSlB3DurOfZNtP8O7s6/Nk/oRuetTkSIj9yCcbE8Ptus731POL7z4MIiwgk7K192Poujrx3FnguZ7vJtFfhW/6eP5wfI7VL3toFq3x8yO3XDTR68fPS2u4r0K2lp4NRV5+EnStUgA/QrShyZfFkGvRboXdGS0YSEoCToISoIOgpKgg6Ak6CCoST493yhz8+OdF11PptdBULOgpiIIahYEVQRBzVIKmt9+vPPj7Y2Nux/zm/vl7n/jTdeT600Q1Cxngt7+8o/s/Ya7ufHm0/ObWfY+/zNZKghqloageeEsb+68+OCq57/f3O96dn0JgpqlscW/qP6W37wvr+7vdj27vgRBzfIZQdndrxQENcvFgn74gmv7qwRBzXKxoJ+e5yUUS5cOgprlYkGLp5nwc+kgKAk6CEqCDoKSoIOgJOggKAk6CEqCDoKSoIOgJOggKAk6CEqCzn/iykwdJchnbwAAAABJRU5ErkJggg==" /><!-- --></p>
<p>If, instead we would use a <strong>gapEra = 1</strong>, we would have
2 resultant episodes, the first two that overlap would be joined in a
single episode (as before), now the two consecutive exposures would be
joined in a single episode:</p>
<pre><code>#&gt; # A tibble: 2 × 4
#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date
#&gt;                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         
#&gt; 1                    1          1 2020-01-01        2020-02-15     
#&gt; 2                    1          1 2020-03-15        2020-05-15</code></pre>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
<p>The result would be the same for any value between 1 and 28
(<strong>gapEra <span class="math inline">\(\in\)</span> [1,
28]</strong>).</p>
<p>Whereas, if we would use a <strong>gapEra = 29</strong> all the
records would be collapsed into a single episode:</p>
<pre><code>#&gt; # A tibble: 1 × 4
#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date
#&gt;                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         
#&gt; 1                    1          1 2020-01-01        2020-05-15</code></pre>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="create-your-cohort" class="section level2">
<h2>Create your cohort</h2>
<p>We will then create now a cohort with all the drug users of
acetaminophen with a gapEra of 30 days.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>codes <span class="ot">&lt;-</span> <span class="fu">getDrugIngredientCodes</span>(<span class="at">cdm =</span> cdm, <span class="at">name =</span> <span class="st">&quot;acetaminophen&quot;</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">names</span>(codes) <span class="ot">&lt;-</span> <span class="st">&quot;acetaminophen&quot;</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>cdm <span class="ot">&lt;-</span> <span class="fu">generateDrugUtilisationCohortSet</span>(<span class="at">cdm =</span> cdm, <span class="at">name =</span> <span class="st">&quot;acetaminophen_cohort&quot;</span>, <span class="at">conceptSet =</span> codes, <span class="at">gapEra =</span> <span class="dv">30</span>)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>cdm</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a><span class="co">#&gt; ── # OMOP CDM reference (duckdb) of DUS MOCK ───────────────────────────────────</span></span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a><span class="co">#&gt; • omop tables: person, observation_period, concept, concept_ancestor,</span></span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a><span class="co">#&gt; drug_strength, concept_relationship, drug_exposure, condition_occurrence,</span></span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a><span class="co">#&gt; observation, visit_occurrence</span></span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a><span class="co">#&gt; • cohort tables: cohort1, cohort2, acetaminophen_cohort</span></span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a><span class="co">#&gt; • achilles tables: -</span></span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a><span class="co">#&gt; • other tables: -</span></span></code></pre></div>
<p>NOTE that the <code>name</code> argument is used to create the new
table in the cdm object. For database backends this is the name of the
table that will be created.</p>
<p>We can compare what we see with what we would expect; if we look at
the individual with more records we can see how all of them are joined
into a single exposure as the records overlap each other:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>cdm<span class="sc">$</span>drug_exposure <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(drug_concept_id <span class="sc">%in%</span> <span class="sc">!!</span>codes<span class="sc">$</span>acetaminophen <span class="sc">&amp;</span> person_id <span class="sc">==</span> <span class="dv">69</span>)</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="co">#&gt; # Source:   SQL [4 x 7]</span></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co">#&gt; # Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="co">#&gt;   drug_exposure_id person_id drug_concept_id drug_exposure_start_date</span></span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a><span class="co">#&gt;              &lt;int&gt;     &lt;int&gt;           &lt;dbl&gt; &lt;date&gt;                  </span></span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a><span class="co">#&gt; 1              201        69         2905077 2002-01-29              </span></span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="co">#&gt; 2              203        69         2905077 2001-04-23              </span></span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt; 3              205        69         2905077 2001-03-04              </span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt; 4              204        69        43135274 2003-10-16              </span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#&gt; # ℹ 3 more variables: drug_exposure_end_date &lt;date&gt;,</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#&gt; #   drug_type_concept_id &lt;dbl&gt;, quantity &lt;dbl&gt;</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>cdm<span class="sc">$</span>acetaminophen_cohort <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(subject_id <span class="sc">==</span> <span class="dv">69</span>)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="co">#&gt; # Source:   SQL [1 x 4]</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co">#&gt; # Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         </span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co">#&gt; 1                    1         69 2001-03-04        2004-06-02</span></span></code></pre></div>
<p>In this case gapEra did not have a big impact as we can see in the
attrition:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">attrition</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 7</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;           </span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="co">#&gt; 1                    1             71              62         1 Initial qualify…</span></span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a><span class="co">#&gt; 2                    1             70              62         2 join exposures …</span></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co">#&gt; # ℹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></code></pre></div>
<p>We can see this particular case of this individual:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>cdm<span class="sc">$</span>drug_exposure <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(drug_concept_id <span class="sc">%in%</span> <span class="sc">!!</span>codes<span class="sc">$</span>acetaminophen <span class="sc">&amp;</span> person_id <span class="sc">==</span> <span class="dv">50</span>)</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a><span class="co">#&gt; # Source:   SQL [2 x 7]</span></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co">#&gt; # Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="co">#&gt;   drug_exposure_id person_id drug_concept_id drug_exposure_start_date</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a><span class="co">#&gt;              &lt;int&gt;     &lt;int&gt;           &lt;dbl&gt; &lt;date&gt;                  </span></span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a><span class="co">#&gt; 1              143        50         1125360 2017-04-14              </span></span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a><span class="co">#&gt; 2              144        50        43135274 2017-04-01              </span></span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a><span class="co">#&gt; # ℹ 3 more variables: drug_exposure_end_date &lt;date&gt;,</span></span>
<span id="cb15-10"><a href="#cb15-10" tabindex="-1"></a><span class="co">#&gt; #   drug_type_concept_id &lt;dbl&gt;, quantity &lt;dbl&gt;</span></span></code></pre></div>
<p>In this case we have 3 exposures separated by 3 days, so if we use
the 30 days gap both exposures are joined into a single episode, whereas
if we would use a gapEra smaller than 3 we would consider them as
different episodes.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>cdm<span class="sc">$</span>acetaminophen_cohort <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(subject_id <span class="sc">==</span> <span class="dv">50</span>)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="co">#&gt; # Source:   SQL [1 x 4]</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co">#&gt; # Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         </span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="co">#&gt; 1                    1         50 2017-04-01        2017-04-23</span></span></code></pre></div>
<p>We can access the other cohort attributes using the adequate
functions. In settings we can see that the gapEra used is recorded or
with cohortCodelist we can see which was the codelist used to create the
cohort.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">settings</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id cohort_name   gap_era</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;  </span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="co">#&gt; 1                    1 acetaminophen 30</span></span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="fu">cohortCount</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects</span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="co">#&gt; 1                    1             70              62</span></span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a><span class="fu">cohortCodelist</span>(cdm<span class="sc">$</span>acetaminophen_cohort, <span class="at">cohortId =</span> <span class="dv">1</span>)</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a><span class="co">#&gt; ── 1 codelist ──────────────────────────────────────────────────────────────────</span></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a><span class="co">#&gt; - acetaminophen (4 codes)</span></span></code></pre></div>
</div>
</div>
<div id="apply-inclusion-criteria-to-drug-cohorts" class="section level1">
<h1>Apply inclusion criteria to drug cohorts</h1>
<p>Once we have created our base cohort using a conceptSet and a gapEra
we can apply different restrictions:</p>
<ul>
<li>require a prior unexposed time:
<code>requirePriorDrugWashout()</code></li>
<li>require that it is the first entry:
<code>requireIsFirstDrugEntry()</code></li>
<li>require a prior observation in the cdm:
<code>requireObservationBeforeDrug()</code></li>
<li>require that date are within a certain interval:
<code>requireDrugInDateRange()</code></li>
</ul>
<div id="requirepriordrugwashout" class="section level2">
<h2><code>requirePriorDrugWashout()</code></h2>
<p>To require that the cohort entries (drug episodes) are incident we
would usually define a time (<code>days</code>) where the individual is
not exposed to the drug. This can be achieved using
<code>requirePriorDrugWashout()</code> function. In this example we
would restrict to individuals with 365 days of no exposure:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>cdm<span class="sc">$</span>acetaminophen_cohort <span class="ot">&lt;-</span> cdm<span class="sc">$</span>acetaminophen_cohort <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  <span class="fu">requirePriorDrugWashout</span>(<span class="at">days =</span> <span class="dv">365</span>)</span></code></pre></div>
<p>The result will be a cohort with the individuals that fulfill the
criteria:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>cdm<span class="sc">$</span>acetaminophen_cohort</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co">#&gt; # Source:   table&lt;main.acetaminophen_cohort&gt; [?? x 4]</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="co">#&gt; # Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="co">#&gt;                   &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         </span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="co">#&gt;  1                    1         35 2005-11-10        2006-09-09     </span></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co">#&gt;  2                    1         23 2003-10-29        2003-11-27     </span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a><span class="co">#&gt;  3                    1         73 2011-04-02        2011-06-19     </span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a><span class="co">#&gt;  4                    1         44 2017-01-01        2018-03-30     </span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="co">#&gt;  5                    1         25 2020-01-04        2020-02-05     </span></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a><span class="co">#&gt;  6                    1         99 2015-02-03        2020-11-01     </span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a><span class="co">#&gt;  7                    1         77 1966-09-15        1966-12-27     </span></span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a><span class="co">#&gt;  8                    1         57 2020-04-17        2020-11-19     </span></span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a><span class="co">#&gt;  9                    1         87 2020-10-02        2021-01-02     </span></span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a><span class="co">#&gt; 10                    1         45 2017-07-03        2018-07-06     </span></span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a><span class="co">#&gt; # ℹ more rows</span></span></code></pre></div>
<p>This would also get recorded in the attrition, counts and
settings.</p>
<p>In the settings a new column with the specified parameter used:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">settings</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 4</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id cohort_name   gap_era prior_use_washout</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;            </span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="co">#&gt; 1                    1 acetaminophen 30      365</span></span></code></pre></div>
<p>The counts will be updated:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="fu">cohortCount</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;</span></span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a><span class="co">#&gt; 1                    1             66              62</span></span></code></pre></div>
<p>And the attrition will have a new line:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">attrition</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 7</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;           </span></span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a><span class="co">#&gt; 1                    1             71              62         1 Initial qualify…</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a><span class="co">#&gt; 2                    1             70              62         2 join exposures …</span></span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a><span class="co">#&gt; 3                    1             66              62         3 require prior u…</span></span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a><span class="co">#&gt; # ℹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></code></pre></div>
<p>The <code>name</code> argument can be used to put the result into a
different table in our cdm (by default the function updates the current
cohort table). Whereas the <code>cohortId</code> argument is used to
apply this criteria to only a restricted set of cohorts (by default the
same criteria is applied to all the cohort records). To show this in an
example we will create two cohorts (metformin and simvastatin) inside a
table named <code>my_cohort</code> and then apply the inclusion criteria
to only one of them (simvastatin) and save the result to a table named:
<code>my_new_cohort</code></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>codes <span class="ot">&lt;-</span> <span class="fu">getDrugIngredientCodes</span>(<span class="at">cdm =</span> cdm, <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;metformin&quot;</span>, <span class="st">&quot;simvastatin&quot;</span>))</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>cdm <span class="ot">&lt;-</span> <span class="fu">generateDrugUtilisationCohortSet</span>(<span class="at">cdm =</span> cdm, <span class="at">name =</span> <span class="st">&quot;my_cohort&quot;</span>, <span class="at">conceptSet =</span> codes, <span class="at">gapEra =</span> <span class="dv">30</span>)</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>cdm</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a><span class="co">#&gt; ── # OMOP CDM reference (duckdb) of DUS MOCK ───────────────────────────────────</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a><span class="co">#&gt; • omop tables: person, observation_period, concept, concept_ancestor,</span></span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a><span class="co">#&gt; drug_strength, concept_relationship, drug_exposure, condition_occurrence,</span></span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a><span class="co">#&gt; observation, visit_occurrence</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a><span class="co">#&gt; • cohort tables: cohort1, cohort2, acetaminophen_cohort, my_cohort</span></span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a><span class="co">#&gt; • achilles tables: -</span></span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a><span class="co">#&gt; • other tables: -</span></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a><span class="fu">settings</span>(cdm<span class="sc">$</span>my_cohort)</span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 3</span></span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id cohort_name       gap_era</span></span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;  </span></span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a><span class="co">#&gt; 1                    1 6809_metformin    30     </span></span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a><span class="co">#&gt; 2                    2 36567_simvastatin 30</span></span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a>cdm<span class="sc">$</span>my_new_cohort <span class="ot">&lt;-</span> cdm<span class="sc">$</span>my_cohort <span class="sc">|&gt;</span></span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a>  <span class="fu">requirePriorDrugWashout</span>(<span class="at">days =</span> <span class="dv">365</span>, <span class="at">cohortId =</span> <span class="dv">2</span>, <span class="at">name =</span> <span class="st">&quot;my_new_cohort&quot;</span>)</span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a>cdm</span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a><span class="co">#&gt; ── # OMOP CDM reference (duckdb) of DUS MOCK ───────────────────────────────────</span></span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a><span class="co">#&gt; • omop tables: person, observation_period, concept, concept_ancestor,</span></span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a><span class="co">#&gt; drug_strength, concept_relationship, drug_exposure, condition_occurrence,</span></span>
<span id="cb23-25"><a href="#cb23-25" tabindex="-1"></a><span class="co">#&gt; observation, visit_occurrence</span></span>
<span id="cb23-26"><a href="#cb23-26" tabindex="-1"></a><span class="co">#&gt; • cohort tables: cohort1, cohort2, acetaminophen_cohort, my_cohort,</span></span>
<span id="cb23-27"><a href="#cb23-27" tabindex="-1"></a><span class="co">#&gt; my_new_cohort</span></span>
<span id="cb23-28"><a href="#cb23-28" tabindex="-1"></a><span class="co">#&gt; • achilles tables: -</span></span>
<span id="cb23-29"><a href="#cb23-29" tabindex="-1"></a><span class="co">#&gt; • other tables: -</span></span>
<span id="cb23-30"><a href="#cb23-30" tabindex="-1"></a><span class="fu">attrition</span>(cdm<span class="sc">$</span>my_new_cohort)</span>
<span id="cb23-31"><a href="#cb23-31" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 7</span></span>
<span id="cb23-32"><a href="#cb23-32" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span id="cb23-33"><a href="#cb23-33" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;           </span></span>
<span id="cb23-34"><a href="#cb23-34" tabindex="-1"></a><span class="co">#&gt; 1                    1             55              48         1 Initial qualify…</span></span>
<span id="cb23-35"><a href="#cb23-35" tabindex="-1"></a><span class="co">#&gt; 2                    1             52              48         2 join exposures …</span></span>
<span id="cb23-36"><a href="#cb23-36" tabindex="-1"></a><span class="co">#&gt; 3                    2             53              48         1 Initial qualify…</span></span>
<span id="cb23-37"><a href="#cb23-37" tabindex="-1"></a><span class="co">#&gt; 4                    2             51              48         2 join exposures …</span></span>
<span id="cb23-38"><a href="#cb23-38" tabindex="-1"></a><span class="co">#&gt; 5                    2             51              48         3 require prior u…</span></span>
<span id="cb23-39"><a href="#cb23-39" tabindex="-1"></a><span class="co">#&gt; # ℹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></code></pre></div>
</div>
<div id="requireisfirstdrugentry" class="section level2">
<h2><code>requireIsFirstDrugEntry()</code></h2>
<p>To require that the cohort entry (drug episodes) is the first one of
the available ones we can use the <code>requireIsFirstDrugEntry()</code>
function. See example:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a>cdm<span class="sc">$</span>acetaminophen_cohort <span class="ot">&lt;-</span> cdm<span class="sc">$</span>acetaminophen_cohort <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a>  <span class="fu">requireIsFirstDrugEntry</span>()</span></code></pre></div>
<p>The result will be a cohort with the individuals that fulfill the
criteria:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>cdm<span class="sc">$</span>acetaminophen_cohort</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="co">#&gt; # Source:   table&lt;main.acetaminophen_cohort&gt; [?? x 4]</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="co">#&gt; # Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="co">#&gt;                   &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         </span></span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a><span class="co">#&gt;  1                    1         45 2017-07-03        2018-07-06     </span></span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a><span class="co">#&gt;  2                    1         95 2001-06-13        2010-01-28     </span></span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a><span class="co">#&gt;  3                    1         26 2015-07-22        2020-07-18     </span></span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a><span class="co">#&gt;  4                    1         51 2017-09-04        2017-09-17     </span></span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a><span class="co">#&gt;  5                    1         58 1995-08-29        2002-06-12     </span></span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a><span class="co">#&gt;  6                    1         62 2005-01-24        2006-12-05     </span></span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a><span class="co">#&gt;  7                    1         73 2011-04-02        2011-06-19     </span></span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a><span class="co">#&gt;  8                    1          8 2019-09-14        2020-12-31     </span></span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a><span class="co">#&gt;  9                    1         23 2003-10-29        2003-11-27     </span></span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a><span class="co">#&gt; 10                    1         44 2017-01-01        2018-03-30     </span></span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a><span class="co">#&gt; # ℹ more rows</span></span></code></pre></div>
<p>This would also get recorded in the attrition, counts and settings on
top of the already exiting ones.</p>
<p>In the settings a new column with the specified parameter used:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="fu">settings</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 5</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id cohort_name   gap_era prior_use_washout limit      </span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;             &lt;chr&gt;      </span></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="co">#&gt; 1                    1 acetaminophen 30      365               first_entry</span></span></code></pre></div>
<p>The counts will be updated:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">cohortCount</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a><span class="co">#&gt; 1                    1             62              62</span></span></code></pre></div>
<p>And the attrition will have a new line:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">attrition</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 7</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;           </span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a><span class="co">#&gt; 1                    1             71              62         1 Initial qualify…</span></span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a><span class="co">#&gt; 2                    1             70              62         2 join exposures …</span></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="co">#&gt; 3                    1             66              62         3 require prior u…</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a><span class="co">#&gt; 4                    1             62              62         4 require is the …</span></span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a><span class="co">#&gt; # ℹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></code></pre></div>
</div>
<div id="requireobservationbeforedrug" class="section level2">
<h2><code>requireObservationBeforeDrug()</code></h2>
<p>To require that a cohort entry (drug episodes) has a certain time of
prior observation we can use the
<code>requireObservationBeforeDrug()</code> function. See example:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>cdm<span class="sc">$</span>acetaminophen_cohort <span class="ot">&lt;-</span> cdm<span class="sc">$</span>acetaminophen_cohort <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>  <span class="fu">requireObservationBeforeDrug</span>(<span class="at">days =</span> <span class="dv">365</span>)</span></code></pre></div>
<p>The result will be a cohort with the individuals that fulfill the
criteria:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>cdm<span class="sc">$</span>acetaminophen_cohort</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="co">#&gt; # Source:   table&lt;main.acetaminophen_cohort&gt; [?? x 4]</span></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a><span class="co">#&gt; # Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a><span class="co">#&gt;                   &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         </span></span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a><span class="co">#&gt;  1                    1         45 2017-07-03        2018-07-06     </span></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a><span class="co">#&gt;  2                    1         95 2001-06-13        2010-01-28     </span></span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a><span class="co">#&gt;  3                    1         26 2015-07-22        2020-07-18     </span></span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a><span class="co">#&gt;  4                    1         51 2017-09-04        2017-09-17     </span></span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a><span class="co">#&gt;  5                    1         58 1995-08-29        2002-06-12     </span></span>
<span id="cb30-11"><a href="#cb30-11" tabindex="-1"></a><span class="co">#&gt;  6                    1         62 2005-01-24        2006-12-05     </span></span>
<span id="cb30-12"><a href="#cb30-12" tabindex="-1"></a><span class="co">#&gt;  7                    1         73 2011-04-02        2011-06-19     </span></span>
<span id="cb30-13"><a href="#cb30-13" tabindex="-1"></a><span class="co">#&gt;  8                    1          8 2019-09-14        2020-12-31     </span></span>
<span id="cb30-14"><a href="#cb30-14" tabindex="-1"></a><span class="co">#&gt;  9                    1         23 2003-10-29        2003-11-27     </span></span>
<span id="cb30-15"><a href="#cb30-15" tabindex="-1"></a><span class="co">#&gt; 10                    1         44 2017-01-01        2018-03-30     </span></span>
<span id="cb30-16"><a href="#cb30-16" tabindex="-1"></a><span class="co">#&gt; # ℹ more rows</span></span></code></pre></div>
<p>This would also get recorded in the attrition, counts and settings on
top of the already exiting ones.</p>
<p>In the settings a new column with the specified parameter used:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">settings</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 6</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id cohort_name   gap_era prior_use_washout limit      </span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;             &lt;chr&gt;      </span></span>
<span id="cb31-5"><a href="#cb31-5" tabindex="-1"></a><span class="co">#&gt; 1                    1 acetaminophen 30      365               first_entry</span></span>
<span id="cb31-6"><a href="#cb31-6" tabindex="-1"></a><span class="co">#&gt; # ℹ 1 more variable: prior_drug_observation &lt;chr&gt;</span></span></code></pre></div>
<p>The counts will be updated:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="fu">cohortCount</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects</span></span>
<span id="cb32-4"><a href="#cb32-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;</span></span>
<span id="cb32-5"><a href="#cb32-5" tabindex="-1"></a><span class="co">#&gt; 1                    1             33              33</span></span></code></pre></div>
<p>And the attrition will have a new line:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="fu">attrition</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 7</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;           </span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a><span class="co">#&gt; 1                    1             71              62         1 Initial qualify…</span></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a><span class="co">#&gt; 2                    1             70              62         2 join exposures …</span></span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="co">#&gt; 3                    1             66              62         3 require prior u…</span></span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a><span class="co">#&gt; 4                    1             62              62         4 require is the …</span></span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a><span class="co">#&gt; 5                    1             33              33         5 require prior o…</span></span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a><span class="co">#&gt; # ℹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></code></pre></div>
</div>
<div id="requiredrugindaterange" class="section level2">
<h2><code>requireDrugInDateRange()</code></h2>
<p>To require that a cohort entry (drug episodes) has a certain date
within an specific range we can use the
<code>requireDrugInDateRange()</code> function. In general you would
like to apply this restriction to the incident date (cohort_start_date),
but the function is flexible and you can use it to restrict to any other
date. See example:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a>cdm<span class="sc">$</span>acetaminophen_cohort <span class="ot">&lt;-</span> cdm<span class="sc">$</span>acetaminophen_cohort <span class="sc">|&gt;</span></span>
<span id="cb34-2"><a href="#cb34-2" tabindex="-1"></a>  <span class="fu">requireDrugInDateRange</span>(</span>
<span id="cb34-3"><a href="#cb34-3" tabindex="-1"></a>    <span class="at">indexDate =</span> <span class="st">&quot;cohort_start_date&quot;</span>,</span>
<span id="cb34-4"><a href="#cb34-4" tabindex="-1"></a>    <span class="at">dateRange =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;2000-01-01&quot;</span>, <span class="st">&quot;2020-12-31&quot;</span>))</span>
<span id="cb34-5"><a href="#cb34-5" tabindex="-1"></a>  )</span></code></pre></div>
<p>The result will be a cohort with the individuals that fulfill the
criteria:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a>cdm<span class="sc">$</span>acetaminophen_cohort</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="co">#&gt; # Source:   table&lt;main.acetaminophen_cohort&gt; [?? x 4]</span></span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="co">#&gt; # Database: DuckDB v0.10.0 [martics@Windows 10 x64:R 4.2.1/:memory:]</span></span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="co">#&gt;    cohort_definition_id subject_id cohort_start_date cohort_end_date</span></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a><span class="co">#&gt;                   &lt;int&gt;      &lt;int&gt; &lt;date&gt;            &lt;date&gt;         </span></span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a><span class="co">#&gt;  1                    1         45 2017-07-03        2018-07-06     </span></span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a><span class="co">#&gt;  2                    1         95 2001-06-13        2010-01-28     </span></span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a><span class="co">#&gt;  3                    1         26 2015-07-22        2020-07-18     </span></span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a><span class="co">#&gt;  4                    1         51 2017-09-04        2017-09-17     </span></span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a><span class="co">#&gt;  5                    1         62 2005-01-24        2006-12-05     </span></span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a><span class="co">#&gt;  6                    1         73 2011-04-02        2011-06-19     </span></span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a><span class="co">#&gt;  7                    1          8 2019-09-14        2020-12-31     </span></span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a><span class="co">#&gt;  8                    1         23 2003-10-29        2003-11-27     </span></span>
<span id="cb35-14"><a href="#cb35-14" tabindex="-1"></a><span class="co">#&gt;  9                    1         44 2017-01-01        2018-03-30     </span></span>
<span id="cb35-15"><a href="#cb35-15" tabindex="-1"></a><span class="co">#&gt; 10                    1         57 2020-04-17        2020-11-19     </span></span>
<span id="cb35-16"><a href="#cb35-16" tabindex="-1"></a><span class="co">#&gt; # ℹ more rows</span></span></code></pre></div>
<p>This would also get recorded in the attrition, counts and settings on
top of the already exiting ones.</p>
<p>In the settings a new column with the specified parameter used:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="fu">settings</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 6</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id cohort_name   gap_era prior_use_washout limit      </span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;   &lt;chr&gt;             &lt;chr&gt;      </span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="co">#&gt; 1                    1 acetaminophen 30      365               first_entry</span></span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a><span class="co">#&gt; # ℹ 1 more variable: prior_drug_observation &lt;chr&gt;</span></span></code></pre></div>
<p>The counts will be updated:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="fu">cohortCount</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 1 × 3</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects</span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;</span></span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a><span class="co">#&gt; 1                    1             24              24</span></span></code></pre></div>
<p>And the attrition will have a new line:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu">attrition</span>(cdm<span class="sc">$</span>acetaminophen_cohort)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 7</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;           </span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="co">#&gt; 1                    1             71              62         1 Initial qualify…</span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a><span class="co">#&gt; 2                    1             70              62         2 join exposures …</span></span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a><span class="co">#&gt; 3                    1             66              62         3 require prior u…</span></span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a><span class="co">#&gt; 4                    1             62              62         4 require is the …</span></span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a><span class="co">#&gt; 5                    1             33              33         5 require prior o…</span></span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a><span class="co">#&gt; 6                    1             24              24         6 require cohort_…</span></span>
<span id="cb38-11"><a href="#cb38-11" tabindex="-1"></a><span class="co">#&gt; # ℹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></code></pre></div>
<p>If you just want to restrict on the lower or upper bound you can just
leave the other element as NA and then no condition will be applied, see
for example:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a>cdm<span class="sc">$</span>my_new_cohort <span class="ot">&lt;-</span> cdm<span class="sc">$</span>my_new_cohort <span class="sc">|&gt;</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a>  <span class="fu">requireDrugInDateRange</span>(<span class="at">dateRange =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&quot;2010-12-31&quot;</span>)))</span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="fu">attrition</span>(cdm<span class="sc">$</span>my_new_cohort)</span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 7 × 7</span></span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a><span class="co">#&gt;   cohort_definition_id number_records number_subjects reason_id reason          </span></span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a><span class="co">#&gt;                  &lt;int&gt;          &lt;int&gt;           &lt;int&gt;     &lt;int&gt; &lt;chr&gt;           </span></span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a><span class="co">#&gt; 1                    1             55              48         1 Initial qualify…</span></span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a><span class="co">#&gt; 2                    1             52              48         2 join exposures …</span></span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a><span class="co">#&gt; 3                    1             23              21         3 require cohort_…</span></span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a><span class="co">#&gt; 4                    2             53              48         1 Initial qualify…</span></span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a><span class="co">#&gt; 5                    2             51              48         2 join exposures …</span></span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a><span class="co">#&gt; 6                    2             51              48         3 require prior u…</span></span>
<span id="cb39-13"><a href="#cb39-13" tabindex="-1"></a><span class="co">#&gt; 7                    2             18              18         4 require cohort_…</span></span>
<span id="cb39-14"><a href="#cb39-14" tabindex="-1"></a><span class="co">#&gt; # ℹ 2 more variables: excluded_records &lt;int&gt;, excluded_subjects &lt;int&gt;</span></span></code></pre></div>
</div>
</div>
<div id="the-order-matters" class="section level1">
<h1>The order matters</h1>
<p>It is very important to know that the different restrictions are not
commutable operations and that different order can lead to different
results. Let’s see the following example where we have an individual
with 4 cohort entries:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
<p>In this case we will see the result of combining in different ways 4
inclusion criteria:</p>
<ul>
<li><strong>first</strong>: <code>requireIsFirstDrugEntry()</code></li>
<li><strong>washout</strong>:
<code>requirePriorDrugWashout(days = 365)</code></li>
<li><strong>minObs</strong>:
<code>requireObservationBeforeDrug(days = 365)</code></li>
<li><strong>2011-2012</strong>
<code>requireDrugInDateRange(dateRange = as.Date(c(&quot;2011-01-01&quot;, &quot;2012-12-31)))</code></li>
</ul>
<div id="first-and-washout" class="section level2">
<h2>first and washout</h2>
<p>If we would apply the initially the <strong>first</strong>
requirement and then the <strong>washout</strong> one we would end with
only the first record:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
<p>Whereas if we would apply initially the <strong>washout</strong>
criteria and then the <strong>first</strong> one the resulting exposure
would be the fourth one:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="first-and-minobs" class="section level2">
<h2>first and minObs</h2>
<p>If we would apply the initially the <strong>first</strong>
requirement and then the <strong>minObs</strong> one we would end with
no record in the cohort:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
<p>Whereas if we would apply initially the <strong>minObs</strong>
criteria and then the <strong>first</strong> one there would be an
exposure selected, the second one:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="first-and-2011-2012" class="section level2">
<h2>first and 2011-2012</h2>
<p>If we would apply the initially the <strong>first</strong>
requirement and then the <strong>2011-2012</strong> one we would end
with no record in the cohort:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
<p>Whereas if we would apply initially the <strong>2011-2012</strong>
criteria and then the <strong>first</strong> one there would be an
exposure selected, the second one:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="washout-and-minobs" class="section level2">
<h2>washout and minObs</h2>
<p>If we would apply the initially the <strong>washout</strong>
requirement and then the <strong>minObs</strong> one we would end with
only the last record selected:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
<p>Whereas if we would apply initially the <strong>minObs</strong>
criteria and then the <strong>washout</strong> one the second and the
fourth exposures are the ones that would be selected:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="washout-and-2011-2012" class="section level2">
<h2>washout and 2011-2012</h2>
<p>If we would apply initially the <strong>washout</strong> requirement
and then the <strong>2011-2012</strong> one no record would be
selected:</p>
<p><img role="img" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAqAAAADACAMAAADsiSGEAAABEVBMVEUAAAAAADoAAGYAOjoAOmYAOpAAZrYzMzM6AAA6ADo6OgA6OmY6ZmY6ZpA6ZrY6kLY6kNtNTU1NTW5NTY5NbqtNjshmAABmOgBmOmZmkJBmkNtmtpBmtrZmtttmtv9uTU1uTW5uTY5ubo5ubqtuq+SOTU2OTW6OTY6Obk2OyP+QOgCQZgCQZjqQZmaQZraQkGaQkLaQtpCQttuQ2/+rbk2rbm6ryKur5OSr5P+2ZgC2Zjq2kDq2tpC2ttu229u22/+2/7a2///Ijk3I///bkDrbkGbbtmbbtpDb27bb29vb/7bb/9vb///kq27k///r6+v/s7P/tmb/yI7/25D/27b/5Kv//7b//8j//9v//+T///+CFEYkAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAIm0lEQVR4nO2aC3fUVBhF0wLjFAVaxFZRig98ML6pDwpqBQdQLGgpLcP9/z/Ee5PMZLCZzIPc3vPN2nsth0ySnnU63f1ukpo5AGGy1AUAmkBQkAZBQRoEBWkQFKRBUJAGQUEaBAVpXk/QQe/cfsPhw3fvTTr06HyWnd0LW8+3suzNvXL3bsed2Jp6dnUUlo6ogvZXJwl6kAVWdpw73gxb5Yn9bKhltTX17OooLB+nJ+hhd3vs61ZuucHdIFg/u7Tvt9bD3jtZqWW1Nf3ssaOwfDQKWvjXDz4Mel6Ah34tXbkaDnzlN67lJzzeKnbli29YaIsv8ucPen6wrY/CxgU97K6X8cOz/evx5sr7m7lm1dYMZ1dH2/pMQIjmCdoPC+duGE5Bg36+lmbbLlev2Di7VWy5g2650M4iaEGQ/rgQcdfP2uNv9st31dYsZ4+OwhLSLGiQyl/2eR8OVnYGvdW9sKvj/7u4n294B72ND7J861oYttWU6zQs8QV9L3Yx/4rfBOcq5U4K2nR2cRSWkGZBgwKHa996H3bzFfSvX77uZkHQM+/9Fo57Z++VZ3WL2RY8PilocW/jGV+HHw4ns5tF0Mazi6OwhEy5SfJeHqz+vrl9vLke9Mgl64RV33Nhr1rOh/PxYGZB/T1OeNMsaH5RsT717PIoLCFTBPXC7fqLyU651r/13a+PcysebeVPe2YVNPDqEu8vCXLXcvOLq0o3WdDms4dHYQmZIuhh94Oevzs6d9crURhWruXO/flltj0u6HCJL/TJ5ZksqL8Hv5ZvjN2Xu4lLfPPZo6OwhEwRdNA7s7bj5+L5/AKwsx8eJvlVP7u07wZ3x6dldZPk1/+r4W1ntBQXvCLo7ujIbniyeaccgRMEbT57l2f0S8y0B/X9LJ+d4R65fLiU36iPNkbL+egxU/GXnbNb+WP1ic9Bi6jwuGj8b0P1gjafPXYUlo9pgh6ESVjcrBeP4m+FFTx/UH9xf+wmyYuyNfyL+INuduHvsO94K+vU3ryUT1RzqZ5vVX9Jrxe0+ezxo7B08H8zgTQICtIgKEiDoCANgoI0CArSIChIg6AgDYKCNAgK0jQL+k8TzUdnh5xTCjKVg6BmcuQKISg5UYJM5SComRy5QghKTpQgUzmzCQqQGCaofI5cIaEJmr4nOXqFEJScKEGmchDUTI5cIQQlJ0qQqRwENZMjVwhByYkSZCoHQc3kyBVCUHKiBJnKQVAzOXKFhAQFSAwTVD5HrpDQBE3fkxy9QghKTpQgUzkIaiZHrhCCkhMlyFQOgprJkSuEoORECTKVg6BmcuQKISg5UYJM5cwmKEBimKDyOXKFhCZo+p7k6BVCUHKiBJnKQVAzOXKFEJScKEGmchDUTI5cIQQlJ0qQqRwENZMjVwhByYkSZCoHQc3kyBUSEhQgMUxQ+Ry5QkITNH1PcvQKISg5UYJM5SComRy5QghKTpQgUzkIaiZHrhCCkhMlyFQOgprJkSuEoORECTKVM5ugAIlhgsrnyBUSmqDpe5KjVwhByYkSZCoHQc3kyBVCUHKiBJnKQVAzOXKFEJScKEGmchDUTI5cIeOC/tvIvD3n4GROc5XYTP6+Gr5otm+srQ9oTubo/Np9EDQ6CPo6fWYTdBGm/NROk0XVaoeFep3eh7MAKTozQaPBBH2dPvEEbbcnOXqFjN8ktduTHL1CCEpOlCBTOQhqJkeuEIKSEyXIVA6CmsmRK4Sg5EQJMpWDoGZy5AoJCQqQGCaofI5cIaEJmr4nOXqFEJScKEGmchDUTI5cIQQlJ0qQqRwENZMjVwhByYkSZCoHQc3kyBVCUHKiBJnKmU1QgMQwQeVz5AoJTdD0PcnRK4Sg5EQJMpWDoGZy5AohKDlRgkzlIKiZHLlCCEpOlCBTOQhqJkeuEIKSEyXIVA6CmsmRKyQkKEBimKDyOXKFhCZo+p7k6BVCUHKiBJnKQVAzOXKFEJScKEGmchDUTI5cIQQlJ0qQqRwENZMjVwhByYkSZCpnNkEBEsMElc+RKyQ0QdP3JEevEIKSEyXIVA6CmsmRK4Sg5EQJMpWDoGZy5AohKDlRgkzlIKiZHLlCCEpOlCBTOQhqJkeukJCgAIlhgsrnyBUSmqDpe5KjVwhByYkSZCoHQc3kyBUSErSRNxb/0ijQZwpqhWbqg6DRUOsjVwhB06LWR64QgqZFrY9codiCAsQHQUEaBAVpEBSkQVCQZj5Bj65vbNx07sWnG1ee5u8/+mPs3elT22f0j0ifcqdOoWcbG28rfUDOvfxh4gc0l6AvPrvtjj68HeKevOPCd+q/0dG706e2z+gfkT7lTp1CQQqtH5h7Mvk3eC5Bn4XQ+zdffF58l/cv/+Rfh+8SUNtn+I9Kn3KnTqGA1A/MHX38RTuCBvwvwdEnT/PfheL7rN4l4UQfl3CJn9An5edTXyjRBK3v8/LHn1ta4l24Wrjhnl0Zz6/epeBkH5dU0No+YadSoaPrl5P9wtT0eXKjrWvQcHXrP2qhCVrTx6UUtLZPvlOpUMKRXi9Qa4IeXQ9B1VXnUdpr0No+LqGgtX2KnUKFAokuiuv6PNkITPodnkvQ8qMOU7q4iAn51btTp7aPSydobZ/0fv6vUMJrskk/sLYmaOH6TZnnoPV90gla22e4U6ZQ2JvoGnTSD6y9a1CA0wVBQRoEBWkQFKRBUJAGQUEaBG2LQS8r6Byu7aQuszwgaJugZusgaJsgaOsgaJsUgvrXw7Xvu1m2fuhftovVf/Ve6nI2QdA2qQTtntt3/Sy8rN4b9DrO9f02zA+CtsmYoH5wFi9rOwdheh5vbqduZxIEbZOxJX6nfOdf+sXd/XrqdiZB0DaZICir++IgaJvUC3qwwr39wiBom9QLOuj5EYqli4GgbVIvaP6YCT8XA0FBGgQFaRAUpEFQkAZBQRoEBWkQFKRBUJAGQUEaBAVp/gNvl759O0gY1wAAAABJRU5ErkJggg==" /><!-- --></p>
<p>Whereas if we would apply initially the <strong>2011-2012</strong>
criteria and then the <strong>washout</strong> one the second record
would be included:</p>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="minobs-and-2011-2012" class="section level2">
<h2>minObs and 2011-2012</h2>
<p>Finally <code>requireObservationBeforeDrug</code> and
<code>requireDrugInDateRange</code> will always be commutable operations
so the other of this two will always be the same.</p>
</div>
<div id="recommended-order" class="section level2">
<h2>Recommended order</h2>
<p>Having all this into account the recommended order to apply criteria
would be:</p>
<ol style="list-style-type: decimal">
<li><p>Require a prior drug washout or require first drug entry
(particular case).</p></li>
<li><p>Require a prior observation before the drug episode.</p></li>
<li><p>Require the drugs to be in a certain date range.</p></li>
</ol>
<p>Although this is the recommended order, your study design may have a
different required specification, for example you may be interested on
the first exposure that fulfills some criteria. Thus making applying the
require first drug entry at the end.</p>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
